country_update_sectors = {
	every_state = {
		if = {
			limit = {
				any_scope_building = {
					is_under_construction = yes
				}
			}
			set_specified_building_level = {
				SPEC_LEVEL = 1
				SPEC_TYPE = building_construction_sector
			}
		}
		fmc_state_on_construction_end = yes
	}
	if = {
		limit = {
			fmc_amount_of_sectors = 0
		}
		capital = {
			create_building = {
				building = building_construction_sector
				level = 1
			}
		}
	}
}

country_update_construction_data = {
	country_update_private_public = yes
	update_construction_effect = yes
}

country_update_private_public = {
	remove_modifier = private_public_share_modifier
	add_modifier = {
		name = private_public_share_modifier
		multiplier = private_public_construction_ratio_target
	}
}

update_construction_effect = {
	every_scope_building = {
		limit = {
			type = bt:building_construction_sector
		}
		remove_modifier = add_construction_modifier
		# save_scope_as = fmc_current_building
		owner = {
			set_variable = {
				name = fmc_throughput_amount
				value = fmc_construction_per_sector
			}
			if = {
				limit = {
					prev.occupancy != 0
				}
				change_variable = {
					name = fmc_throughput_amount
					divide = prev.occupancy
					#subtract = 1
				}
			}

			change_variable = {
				name = fmc_throughput_amount
				subtract = 1
			}
		}
		add_modifier = {
			name = add_construction_modifier
			multiplier = owner.var:fmc_throughput_amount
		}
	}
}