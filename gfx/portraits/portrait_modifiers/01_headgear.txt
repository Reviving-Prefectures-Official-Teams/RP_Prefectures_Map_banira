headgear = {
	usage = game
	selection_behavior = weighted_random
	fallback = no_headgear

    no_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = no_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }   
        weight = {
            base = 0
            modifier = {
                add = 90000
                scope:character ?= {
                    OR = {
                        has_role = agitator
                        has_template = fra_delescluze_character_template # Never ever give Louis Delescluze a hat, any hat. His forehead is too powerful.
                        has_template = BRZ_getulio_vargas_character_template # Vargas is forbidden from wearing hats.
                    }
                    is_historical = yes
                    NOR = {
                        has_template = rus_lenin_character_template
                        has_template = gbr_pankhurst_character_template
                        has_template = agitator_emiliano_zapata
                    }
                }
            }
        }
    }

### AGITATORS ###

    japanese_agitator_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = japanese_headgear_agitators
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 2000
                japanese_clothes_trigger = yes
                OR = {
                    agitator_character_trigger = yes
                    AND = {
                        politician_clothes_trigger = yes
                        armed_forces_clothes_trigger = yes
                        scope:character ?= {
                            has_ideology = ideology:ideology_traditionalist
                        }
                    }
                }
            }
        }
    }

### END OF AGITATORS. ###

    japanese_imperial_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = Japanese_imperial_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_imperial_clothes_trigger = yes
            }
        }
    }

    japanese_meiji_military_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = european_military_02_colors
                range = { 0 1 }
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 1200
                OR = {
                    AND = {
                        scope:character ?= {
                            culture = cu:japanese
                            owner ?= {
                                has_variable = meiji_restoration_complete
                            }
                        }
                        OR = {
                            scope:character = {
                                has_role = general
                            }
                            AND = {
                                politician_clothes_trigger = yes
                                armed_forces_clothes_trigger = yes
                                scope:character ?= {
                                    NOT = { has_ideology = ideology:ideology_traditionalist }
                                }
                            }
                        }
                        agitator_character_trigger = no
                    }
                    AND = {
                        scope:pop ?= {
                            culture = cu:japanese
                            owner = {
                                has_variable = meiji_restoration_complete
                            }
                        }
                        OR = {
                            soldier_clothes_pop_trigger = yes
                            officers_clothes_pop_trigger = yes
                        }
                    }
                }
            }
        }
    }

    japanese_common_headgear = {
        dna_modifiers = {
            accessory = {
                mode = add
                gene = headgear
                template = Japanese_common_headgear
                range = { 0 1 } # For the randomness to work correctly
            }
        }
        weight = {
            base = 0
            modifier = {
                add = 100
                japanese_clothes_pop_trigger = yes
                scope:pop ?= {
                    OR = {
                        is_pop_type = farmers
                        is_pop_type = peasants
                        is_pop_type = laborers
                        AND = {
                            is_pop_type = machinists
                            owner = {
                                NOT = { has_variable = meiji_restoration_complete }
                            }
                        }
                    }
                }   
            }
        }
    }

}
